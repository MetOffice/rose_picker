
[field_config]
title=LFRic Field Configuration

[field_config:system]
title=System
[field_config:system:test]
title=Test
[field_config:system:test=example_fields__test_field]
type=boolean
title=Enable Test Field
trigger=field_config:system:test=example_fields__test_field__checksum: true;
help=Unit of Measure: m s-1
    =Function Space: W2
    =Data type: REAL_TYPE
    =Time step: STANDARD_TIMESTEP
    =Interpolation: BILINEAR

description=u component of wind on u pts on native c grid.
           =For more information on Test Field, see the help text

[field_config:system:test=example_fields__test_field__checksum]
type=boolean
title=Enable Checksum for Test Field

[field_config:system:test_with_vlevels]
title=Test With Vlevels
[field_config:system:test_with_vlevels=model_levels_for_group]
title=Model Levels used by this group
description=Vertical dimensions must define these levels to be valid
values=
            TOP_ATMOSPHERIC_LEVEL
            BOTTOM_ATMOSPHERIC_LEVEL

sort-key=01
compulsory=true

[field_config:system:test_with_vlevels=vertical_dimension_for_group]
title=Vertical dimension used by this group
description=If you have edited the vertical dimensions please restart the GUI
            to pick up the changes to the rose-app.conf file
widget[rose-config-edit]=vertical_dimension_choice.VertDimWidget
sort-key=02
compulsory=true

[field_config:system:test_with_vlevels=example_fields__test_field]
type=boolean
title=Enable Test Field
trigger=field_config:system:test_with_vlevels=example_fields__test_field__checksum: true;
help=Unit of Measure: m s-1
    =Function Space: W2
    =Data type: REAL_TYPE
    =Time step: STANDARD_TIMESTEP
    =Interpolation: BILINEAR
    =vertical_dimension:
       =top_level: TOP_ATMOSPHERIC_LEVEL
       =bottom_level: BOTTOM_ATMOSPHERIC_LEVEL
       =units: m
       =positive: POSITIVE_UP
       =standard_name: height
    =Synonyms:
    =    STASH: 2
    =    AMIP: ua
    =    GRIB: 33 E131
    =    CF: eastward_wind
    =    CMIP6: ua

description=u component of wind on u pts on native c grid.
           =For more information on Test Field, see the help text

[field_config:system:test_with_vlevels=example_fields__test_field__checksum]
type=boolean
title=Enable Checksum for Test Field
[output_stream]
duplicate=true
macro=add_section.AddField, add_section.AddStream
title=Output Streams

[output_stream=name]
type=character

[output_stream=timestep]
type=character

[output_stream:field]
duplicate=true
macro=add_section.AddField
title=Fields

[output_stream:field=id]
values=example_fields__test_field, example_fields__test_field
value-titles="System: Test: Test Field", "System: Test With Vlevels: Test Field"

[output_stream:field=temporal]
values=instant,average,accumulate,minimum,maximum,once

[vertical_dimension]
duplicate=true
title=Vertical Dimension

[vertical_dimension=name]
title=Name
description=Name of the vertical dimension
help=The name used to identify this vertical dimension when associating a field
     with it in Rose
type=character
compulsory=true
fail-if=len(this) == 0 # Name must be specified
sort-key=01

[vertical_dimension=primary_axis]
title=Primary axis
description=Does this dimension define the vertical extrusion in LFRic
help=Should the LFRic vertical extrusion be based on this dimension
    =If true then the specification method should be generated
    =The LFRic extrusion namelist can then be updated with the given parameters
    =Only one dimension should be set to true
values=true,false
compulsory=true
fail-if=this == 'true' and vertical_dimension=specification_method == 'manual'
       =# Primary axis must have generated as specification method
sort-key=02

[vertical_dimension=specification_method]
title=Specification method
description=Method for specifying the dimension level definition
help=Whether the vertical dimension is specified by parameters used to generate
     it in lFRic, or by the height of each level being defined in Rose
values=generated,manual
trigger=vertical_dimension=extrusion_method: generated;
       =vertical_dimension=domain_top: generated;
       =vertical_dimension=level_definition: manual;
compulsory=true
sort-key=03

[vertical_dimension=number_of_layers]
compulsory=true
description=Number of layers in the vertical
fail-if=this < 1 ;
help=Setting for number of layers of 3D-mesh in vertical.
range=1:
sort-key=04
title=Number of layers
type=integer

[vertical_dimension=domain_top]
compulsory=true
description=Domain height [m]
fail-if=this < 0.0 ;
help=Height of the model domain from a flat planet surface.
    =Height of planet surface taken as:
    = * For Cartesian domain: 0m
    = * For Spherical domain: namelist:planet=radius
range=0.0:
sort-key=05
title=Domain top
type=real

[vertical_dimension=extrusion_method]
compulsory=true
description=Method for generating eta coordinate
fail-if=this == 'um_L38_29t_9s_40km'  and vertical_dimension=number_of_layers != 38 ;
       =this == 'um_L70_50t_20s_80km' and vertical_dimension=number_of_layers != 70 ;
       =this == 'um_L85_50t_35s_85km' and vertical_dimension=number_of_layers != 85 ;
help=Available extrusion methods are (\f$n$ is number of layers):
    =1) Uniform eta spacing (\f$\frac{k}{n}\f$);
    =2) Quadratic eta spacing (\f$\frac{k}{n}^2\f$);
    =3) Geometric eta spacing (\f$d\eta = \frac{(s - 1)}{(s^{n} - 1)}$)
    =    with stretching factor prescribed (\f$s=1.03$);
    =4) DCMIP eta spacing (Ullrich et al. (2012) DCMIP documentation, Appendix F.2.)
    =    with flattening parameter prescribed.
    =5) L38 40km UM specific eta spacing;
    =6) L70 80km UM specific eta spacing;
    =7) L85 85km UM specific eta spacing;
sort-key=06
title=Extrusion method
value-titles=Uniform, Quadratic, Geometric, DCMIP,
            = um_L38_29t_9s_40km, um_L70_50t_20s_80km, um_L85_50t_35s_85km
values='uniform', 'quadratic', 'geometric', 'dcmip',
      ='um_L38_29t_9s_40km', 'um_L70_50t_20s_80km', 'um_L85_50t_35s_85km'

[vertical_dimension=level_definition]
compulsory=true
title=Level boundaries
description=Boundaries of levels in ascending order
help=Positive numbers defining the edges of each level in the vertical
     dimension. The boundaries should be entered in ascending order
length=:
type=real
!macro=level_definition.Validator, level_definition.Transformer
range=0:
fail-if=len(this) != vertical_dimension=number_of_layers + 1
       =# Number of level boundaries must equal number of layers plus one
sort-key=05

[vertical_dimension=positive]
title=Positive
description=The positive direction
help=The positive direction of the vertical axis, either up or down
values=up, down
compulsory=true
sort-key=07

[vertical_dimension=units]
title=Units
description=Unit of measure
help=The unit of measure for this vertical axis is restricted to be in metres
values=m
compulsory=true
sort-key=08
[vertical_dimension=BOTTOM_ATMOSPHERIC_LEVEL]
title=BOTTOM ATMOSPHERIC LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1001
[vertical_dimension=TOP_ATMOSPHERIC_LEVEL]
title=TOP ATMOSPHERIC LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1002
[vertical_dimension=TOP_WET_LEVEL]
title=TOP WET LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1003
[vertical_dimension=TOP_ATMOSPHERIC_LEVEL_MINUS_ONE]
title=TOP ATMOSPHERIC LEVEL MINUS ONE
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1004
[vertical_dimension=BOTTOM_LEVEL_IN_BOUNDARY_LAYER]
title=BOTTOM LEVEL IN BOUNDARY LAYER
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1005
[vertical_dimension=TOP_LEVEL_IN_BOUNDARY_LAYER]
title=TOP LEVEL IN BOUNDARY LAYER
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1006
[vertical_dimension=BOTTOM_LEVEL_ABOVE_BOUNDARY_LAYER]
title=BOTTOM LEVEL ABOVE BOUNDARY LAYER
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1007
[vertical_dimension=BOTTOM_SOIL_LEVEL]
title=BOTTOM SOIL LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1008
[vertical_dimension=TOP_SOIL_LEVEL]
title=TOP SOIL LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1009
[vertical_dimension=BOTTOM_TRACER_LEVEL]
title=BOTTOM TRACER LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1010
[vertical_dimension=TOP_TRACER_LEVEL]
title=TOP TRACER LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1011
[vertical_dimension=TOP_GRAVITY_WAVE_DRAG_LEVEL_PLUS_ONE]
title=TOP GRAVITY WAVE DRAG LEVEL PLUS ONE
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1012
[vertical_dimension=BOTTOM_GRAVITY_WAVE_DRAG_LEVEL]
title=BOTTOM GRAVITY WAVE DRAG LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1013
[vertical_dimension=TOP_GRAVITY_WAVE_DRAG_LEVEL]
title=TOP GRAVITY WAVE DRAG LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1014
[vertical_dimension=BOTTOM_LEVEL_IN_VERTICAL_DIFFUSION_ROUTINE]
title=BOTTOM LEVEL IN VERTICAL DIFFUSION ROUTINE
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1015
[vertical_dimension=TOP_LEVEL_IN_VERTICAL_DIFFUSION_ROUTINE_MINUS_ONE]
title=TOP LEVEL IN VERTICAL DIFFUSION ROUTINE MINUS ONE
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1016
[vertical_dimension=TOP_LEVEL_IN_VERTICAL_DIFFUSION_ROUTINE]
title=TOP LEVEL IN VERTICAL DIFFUSION ROUTINE
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1017
[vertical_dimension=TOP_LEVEL_IN_BOUNDARY_LAYER_MINUS_ONE]
title=TOP LEVEL IN BOUNDARY LAYER MINUS ONE
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1018
[vertical_dimension=TOP_LEVEL_OF_ATMOSPHERE_PLUS_ONE]
title=TOP LEVEL OF ATMOSPHERE PLUS ONE
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1019
[vertical_dimension=BOTTOM_SOIL_LEVEL_PLUS_ONE]
title=BOTTOM SOIL LEVEL PLUS ONE
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1020
[vertical_dimension=TOP_OZONE_LEVEL]
title=TOP OZONE LEVEL
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1021
[vertical_dimension=NUMBER_OF_CLOUDY_LEVELS]
title=NUMBER OF CLOUDY LEVELS
description=A Model Level
type=integer
range=1:
# Layer out of range
fail-if=this > vertical_dimension=number_of_layers;
sort-key=model-levels-1022

[non_spatial_dimensions]
title=Non-Spatial Dimensions
